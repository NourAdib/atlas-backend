<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>atlas-backend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">atlas-backend documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Injectables</li>
  <li >PostService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/modules/post/post.service.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#addComment" >addComment</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#addPostToScrapbook" >addPostToScrapbook</a>
                            </li>
                            <li>
                                <a href="#createPost" >createPost</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createPostWithImage" >createPostWithImage</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createScrapbook" >createScrapbook</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteComment" >deleteComment</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deletePostById" >deletePostById</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getPostById" >getPostById</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getPostComments" >getPostComments</a>
                            </li>
                            <li>
                                <a href="#getScrapbookById" >getScrapbookById</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getUserComments" >getUserComments</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getUserPosts" >getUserPosts</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getUserScrapbooks" >getUserScrapbooks</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#likePost" >likePost</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#removePostFromScrapbook" >removePostFromScrapbook</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#unlikePost" >unlikePost</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(postRepository: <a href="../entitys/Post.html" target="_self">Repository&lt;Post&gt;</a>, scrapbookRepository: <a href="../entitys/Scrapbook.html" target="_self">Repository&lt;Scrapbook&gt;</a>, commentRepository: <a href="../entitys/Comment.html" target="_self">Repository&lt;Comment&gt;</a>, likeRepository: <a href="../entitys/Like.html" target="_self">Repository&lt;Like&gt;</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/modules/post/post.service.ts:16</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>postRepository</td>
                                                  
                                                        <td>
                                                                        <code><a href="../entitys/Post.html" target="_self" >Repository&lt;Post&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>scrapbookRepository</td>
                                                  
                                                        <td>
                                                                        <code><a href="../entitys/Scrapbook.html" target="_self" >Repository&lt;Scrapbook&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>commentRepository</td>
                                                  
                                                        <td>
                                                                        <code><a href="../entitys/Comment.html" target="_self" >Repository&lt;Comment&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>likeRepository</td>
                                                  
                                                        <td>
                                                                        <code><a href="../entitys/Like.html" target="_self" >Repository&lt;Like&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addComment"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>addComment</b></span>
                        <a href="#addComment"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addComment(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, comment: <a href="../classes/CreateCommentDto.html" target="_self">CreateCommentDto</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="278"
                            class="link-to-prism">src/modules/post/post.service.ts:278</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>comment</td>
                                    <td>
                                                <code><a href="../classes/CreateCommentDto.html" target="_self" >CreateCommentDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Post.html" target="_self" >Promise&lt;Post&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addPostToScrapbook"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>addPostToScrapbook</b></span>
                        <a href="#addPostToScrapbook"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addPostToScrapbook(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, scrapbookId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="212"
                            class="link-to-prism">src/modules/post/post.service.ts:212</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>scrapbookId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Scrapbook.html" target="_self" >Promise&lt;Scrapbook&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createPost"></a>
                    <span class="name">
                        <span ><b>createPost</b></span>
                        <a href="#createPost"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>createPost(user: <a href="../entitys/User.html" target="_self">User</a>, post: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="37"
                            class="link-to-prism">src/modules/post/post.service.ts:37</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates a new post</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="../entitys/User.html" target="_self" >User</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the user sending the request</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>post</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the post to be created</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Post.html" target="_self" >Promise&lt;Post&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>the created post</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createPostWithImage"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>createPostWithImage</b></span>
                        <a href="#createPostWithImage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createPostWithImage(user: <a href="../entitys/User.html" target="_self">User</a>, post: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, image: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="48"
                            class="link-to-prism">src/modules/post/post.service.ts:48</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="../entitys/User.html" target="_self" >User</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>post</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>image</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Post.html" target="_self" >Promise&lt;Post&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createScrapbook"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>createScrapbook</b></span>
                        <a href="#createScrapbook"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createScrapbook(user: <a href="../entitys/User.html" target="_self">User</a>, scrapbook: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="85"
                            class="link-to-prism">src/modules/post/post.service.ts:85</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates a new scrapbook and if posts are present, creates them as well</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="../entitys/User.html" target="_self" >User</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the user sending the request</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>scrapbook</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the scrapbook to be created</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Scrapbook.html" target="_self" >Promise&lt;Scrapbook&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>the created scrapbook</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteComment"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>deleteComment</b></span>
                        <a href="#deleteComment"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteComment(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, commentId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="365"
                            class="link-to-prism">src/modules/post/post.service.ts:365</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>commentId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;DeleteResult&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deletePostById"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>deletePostById</b></span>
                        <a href="#deletePostById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deletePostById(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="263"
                            class="link-to-prism">src/modules/post/post.service.ts:263</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;DeleteResult&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getPostById"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getPostById</b></span>
                        <a href="#getPostById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getPostById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="104"
                            class="link-to-prism">src/modules/post/post.service.ts:104</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Post.html" target="_self" >Promise&lt;Post&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getPostComments"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getPostComments</b></span>
                        <a href="#getPostComments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getPostComments(postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, pageOptionsDto: <a href="../classes/PageOptionsDto.html" target="_self">PageOptionsDto</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="295"
                            class="link-to-prism">src/modules/post/post.service.ts:295</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageOptionsDto</td>
                                    <td>
                                                <code><a href="../classes/PageOptionsDto.html" target="_self" >PageOptionsDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/PageDto.html" target="_self" >Promise&lt;PageDto&lt;Comment&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getScrapbookById"></a>
                    <span class="name">
                        <span ><b>getScrapbookById</b></span>
                        <a href="#getScrapbookById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getScrapbookById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="204"
                            class="link-to-prism">src/modules/post/post.service.ts:204</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns the scrapbook with the given id</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the id of the scrapbook</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Scrapbook.html" target="_self" >Promise&lt;Scrapbook&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>the scrapbook with the given id</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUserComments"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getUserComments</b></span>
                        <a href="#getUserComments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUserComments(userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, pageOptionsDto: <a href="../classes/PageOptionsDto.html" target="_self">PageOptionsDto</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="324"
                            class="link-to-prism">src/modules/post/post.service.ts:324</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>userId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageOptionsDto</td>
                                    <td>
                                                <code><a href="../classes/PageOptionsDto.html" target="_self" >PageOptionsDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/PageDto.html" target="_self" >Promise&lt;PageDto&lt;Comment&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUserPosts"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getUserPosts</b></span>
                        <a href="#getUserPosts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUserPosts(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, pageOptionsDto: <a href="../classes/PageOptionsDto.html" target="_self">PageOptionsDto</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="146"
                            class="link-to-prism">src/modules/post/post.service.ts:146</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all the posts of a user</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the user sending t he request</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>pageOptionsDto</td>
                                    <td>
                                                <code><a href="../classes/PageOptionsDto.html" target="_self" >PageOptionsDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/PageDto.html" target="_self" >Promise&lt;PageDto&lt;Post&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>the posts of the user</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUserScrapbooks"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getUserScrapbooks</b></span>
                        <a href="#getUserScrapbooks"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUserScrapbooks(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, pageOptionsDto: <a href="../classes/PageOptionsDto.html" target="_self">PageOptionsDto</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="175"
                            class="link-to-prism">src/modules/post/post.service.ts:175</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all the scrapbooks of a user</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the user sending the request</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>pageOptionsDto</td>
                                    <td>
                                                <code><a href="../classes/PageOptionsDto.html" target="_self" >PageOptionsDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/PageDto.html" target="_self" >Promise&lt;PageDto&lt;Scrapbook&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>the scrapbooks of the user</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="likePost"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>likePost</b></span>
                        <a href="#likePost"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>likePost(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="380"
                            class="link-to-prism">src/modules/post/post.service.ts:380</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Like.html" target="_self" >Promise&lt;Like&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removePostFromScrapbook"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>removePostFromScrapbook</b></span>
                        <a href="#removePostFromScrapbook"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removePostFromScrapbook(scrapbookId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="238"
                            class="link-to-prism">src/modules/post/post.service.ts:238</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>scrapbookId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../entitys/Scrapbook.html" target="_self" >Promise&lt;Scrapbook&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="unlikePost"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>unlikePost</b></span>
                        <a href="#unlikePost"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>unlikePost(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, postId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="403"
                            class="link-to-prism">src/modules/post/post.service.ts:403</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>postId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;DeleteResult&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpException, HttpStatus, Injectable } from &#x27;@nestjs/common&#x27;;
import { InjectRepository } from &#x27;@nestjs/typeorm&#x27;;
import { FirebaseStorageService } from &#x27;src/common/services/firebase-storage.service&#x27;;
import { DeleteResult, Repository } from &#x27;typeorm&#x27;;
import { User } from &#x27;../user/entities/user.entity&#x27;;
import { CreateCommentDto } from &#x27;./dto/comment-create.dto&#x27;;
import { Post } from &#x27;./entities/post.entity&#x27;;
import { Scrapbook } from &#x27;./entities/scrapbook.entity&#x27;;
import { Comment } from &#x27;./entities/comment.entity&#x27;;
import { PageOptionsDto } from &#x27;src/common/dto/page-options.dto&#x27;;
import { PageDto } from &#x27;src/common/dto/page.dto&#x27;;
import { PageMetaDto } from &#x27;src/common/dto/page-meta.dto&#x27;;
import { Like } from &#x27;./entities/post-like.entity&#x27;;

@Injectable()
export class PostService {
  constructor(
    @InjectRepository(Post)
    private postRepository: Repository&lt;Post&gt;,

    @InjectRepository(Scrapbook)
    private scrapbookRepository: Repository&lt;Scrapbook&gt;,

    @InjectRepository(Comment)
    private commentRepository: Repository&lt;Comment&gt;,

    @InjectRepository(Like)
    private likeRepository: Repository&lt;Like&gt;
  ) {}

  /**
   * Creates a new post
   * @param user the user sending the request
   * @param post the post to be created
   * @returns the created post
   */
  createPost(user: User, post: any): Promise&lt;Post&gt; {
    const newPost &#x3D; new Post();
    newPost.caption &#x3D; post.caption;
    newPost.tag &#x3D; post.tag;
    newPost.type &#x3D; post.type;
    newPost.location &#x3D; post.location;
    newPost.visibility &#x3D; post.visibility;
    newPost.postedBy &#x3D; user;
    return this.postRepository.save(newPost);
  }

  async createPostWithImage(user: User, post: any, image: any): Promise&lt;Post&gt; {
    const newPost &#x3D; new Post();
    newPost.caption &#x3D; post.caption;
    newPost.tag &#x3D; post.tag;
    newPost.type &#x3D; post.type;
    newPost.location &#x3D; post.location;
    newPost.visibility &#x3D; post.visibility;
    newPost.postedBy &#x3D; user;
    const savedPost &#x3D; await this.postRepository.save(newPost);
    const { imageId, url, expiryDate } &#x3D; await new FirebaseStorageService().uploadPostImage(
      image.buffer,
      user.id,
      savedPost.id
    );

    await this.postRepository
      .createQueryBuilder()
      .update(Post)
      .set({
        imageId: imageId,
        imageUrl: url,
        imageExpiryDate: new Date(expiryDate)
      })
      .where(&#x27;id &#x3D; :id&#x27;, { id: savedPost.id })
      .execute();

    return this.postRepository.findOneBy({ id: savedPost.id }).then((post) &#x3D;&gt; {
      return post;
    });
  }

  /**
   * Creates a new scrapbook and if posts are present, creates them as well
   * @param user the user sending the request
   * @param scrapbook the scrapbook to be created
   * @returns the created scrapbook
   */
  async createScrapbook(user: User, scrapbook: any): Promise&lt;Scrapbook&gt; {
    const newScrapbook &#x3D; new Scrapbook();
    newScrapbook.caption &#x3D; scrapbook.caption;
    newScrapbook.location &#x3D; scrapbook.location;
    newScrapbook.visibility &#x3D; scrapbook.visibility;
    newScrapbook.user &#x3D; user;
    newScrapbook.posts &#x3D; [];

    if (scrapbook.posts) {
      for await (const post of scrapbook.posts) {
        await this.createPost(user, post).then((savedPost) &#x3D;&gt; {
          newScrapbook.posts.push(savedPost);
        });
      }
    }

    return this.scrapbookRepository.save(newScrapbook);
  }

  async getPostById(id: string): Promise&lt;Post&gt; {
    const post &#x3D; await this.postRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Post.postedBy&#x27;, &#x27;User&#x27;)
      .leftJoinAndSelect(&#x27;Post.comments&#x27;, &#x27;Comment&#x27;)
      .leftJoinAndSelect(&#x27;Comment.author&#x27;, &#x27;CommentUser&#x27;)
      .leftJoinAndSelect(&#x27;Post.likes&#x27;, &#x27;Like&#x27;)
      .leftJoinAndSelect(&#x27;Like.likedBy&#x27;, &#x27;LikeUser&#x27;)
      .where(&#x27;Post.id &#x3D; :id&#x27;, { id: id })
      .getOne();

    if (!post) {
      throw new HttpException(&#x27;Post not found&#x27;, HttpStatus.NOT_FOUND);
    }

    if (post.imageId) {
      if (post.imageId &amp;&amp; post.imageExpiryDate &lt; new Date(Date.now())) {
        const { url, expiryDate } &#x3D; await new FirebaseStorageService().getPostImageSignedURL(
          post.imageId,
          post.postedBy.id,
          post.id
        );

        this.postRepository
          .createQueryBuilder()
          .update(Post)
          .set({
            imageExpiryDate: new Date(expiryDate),
            imageUrl: url
          })
          .where(&#x27;id &#x3D; :id&#x27;, { id: post.id })
          .execute();
      }
    }
    return post;
  }

  /**
   * Returns all the posts of a user
   * @param user the user sending t he request
   * @returns the posts of the user
   */
  async getUserPosts(user: any, pageOptionsDto: PageOptionsDto): Promise&lt;PageDto&lt;Post&gt;&gt; {
    const queryResults &#x3D; await this.postRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Post.postedBy&#x27;, &#x27;User&#x27;)
      .where(&#x27;User.id &#x3D; :id&#x27;, { id: user.id })
      .skip(pageOptionsDto.skip)
      .take(pageOptionsDto.take)
      .orderBy(&#x27;Post.createdAt&#x27;, pageOptionsDto.order)
      .getManyAndCount()
      .then((userPostsAndCount) &#x3D;&gt; {
        return {
          items: userPostsAndCount[0],
          itemsCount: userPostsAndCount[1]
        };
      });

    const itemCount: number &#x3D; queryResults.itemsCount;
    const entities: Post[] &#x3D; queryResults.items;

    const pageMetaDto: PageMetaDto &#x3D; new PageMetaDto({ itemCount, pageOptionsDto });

    return new PageDto(entities, pageMetaDto);
  }

  /**
   * Returns all the scrapbooks of a user
   * @param user the user sending the request
   * @returns the scrapbooks of the user
   */
  async getUserScrapbooks(user: any, pageOptionsDto: PageOptionsDto): Promise&lt;PageDto&lt;Scrapbook&gt;&gt; {
    const queryResults &#x3D; await this.scrapbookRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Scrapbook.user&#x27;, &#x27;User&#x27;)
      .where(&#x27;User.id &#x3D; :id&#x27;, { id: user.id })
      .skip(pageOptionsDto.skip)
      .take(pageOptionsDto.take)
      .orderBy(&#x27;Scrapbook.createdAt&#x27;, pageOptionsDto.order)
      .getManyAndCount()
      .then((userScrapbooksAndCount) &#x3D;&gt; {
        return {
          items: userScrapbooksAndCount[0],
          itemsCount: userScrapbooksAndCount[1]
        };
      });

    const itemCount: number &#x3D; queryResults.itemsCount;
    const entities: Scrapbook[] &#x3D; queryResults.items;

    const pageMetaDto: PageMetaDto &#x3D; new PageMetaDto({ itemCount, pageOptionsDto });

    return new PageDto(entities, pageMetaDto);
  }

  /**
   * Returns the scrapbook with the given id
   * @param id the id of the scrapbook
   * @returns the scrapbook with the given id
   */
  getScrapbookById(id: string): Promise&lt;Scrapbook&gt; {
    return this.scrapbookRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Scrapbook.posts&#x27;, &#x27;Post&#x27;)
      .where(&#x27;Scrapbook.id &#x3D; :id&#x27;, { id: id })
      .getOne();
  }

  async addPostToScrapbook(user: any, scrapbookId: string, postId: string): Promise&lt;Scrapbook&gt; {
    const post &#x3D; await this.postRepository.findOneBy({ id: postId });

    if (!post) {
      throw new HttpException(&#x27;post does not exist&#x27;, HttpStatus.NO_CONTENT);
    }
    const scrapbook &#x3D; await this.scrapbookRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Scrapbook.posts&#x27;, &#x27;Post&#x27;)
      .where(&#x27;Scrapbook.id &#x3D; :id&#x27;, { id: scrapbookId })
      .getOne();

    if (!scrapbook) {
      throw new HttpException(&#x27;scrapbook does not exist&#x27;, HttpStatus.NO_CONTENT);
    }

    if (!scrapbook.posts) {
      scrapbook.posts &#x3D; [];
    }
    if (scrapbook.posts.find((p) &#x3D;&gt; p.id &#x3D;&#x3D;&#x3D; post.id)) {
      throw new HttpException(&#x27;post already exists in scrapbook&#x27;, HttpStatus.BAD_REQUEST);
    }
    scrapbook.posts.push(post);
    return await this.scrapbookRepository.save(scrapbook);
  }

  async removePostFromScrapbook(scrapbookId: string, postId: string): Promise&lt;Scrapbook&gt; {
    const scrapbook &#x3D; await this.scrapbookRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Scrapbook.posts&#x27;, &#x27;Post&#x27;)
      .where(&#x27;Scrapbook.id &#x3D; :id&#x27;, { id: scrapbookId })
      .getOne();

    if (!scrapbook) {
      throw new HttpException(&#x27;scrapbook does not exist&#x27;, HttpStatus.NO_CONTENT);
    }

    if (!scrapbook.posts) {
      throw new HttpException(&#x27;scrapbook does not contain post&#x27;, HttpStatus.NO_CONTENT);
    }

    const post &#x3D; scrapbook.posts.find((p) &#x3D;&gt; p.id &#x3D;&#x3D;&#x3D; postId);

    if (!post) {
      throw new HttpException(&#x27;scrapbook does not contain post&#x27;, HttpStatus.NO_CONTENT);
    }

    scrapbook.posts &#x3D; scrapbook.posts.filter((p) &#x3D;&gt; p.id !&#x3D;&#x3D; postId);
    return await this.scrapbookRepository.save(scrapbook);
  }

  async deletePostById(user: any, postId: string): Promise&lt;DeleteResult&gt; {
    const dbPost &#x3D; await this.getPostById(postId).then((post) &#x3D;&gt; {
      return post;
    });

    if (!dbPost) {
      throw new HttpException(&#x27;post does not exist&#x27;, HttpStatus.NO_CONTENT);
    }

    if (dbPost.imageId) {
      await new FirebaseStorageService().deletePostImage(dbPost.imageId, user.id, dbPost.id);
    }
    return await this.postRepository.delete({ id: postId });
  }

  async addComment(user: any, postId: string, comment: CreateCommentDto): Promise&lt;Post&gt; {
    const post &#x3D; await this.getPostById(postId).then((post) &#x3D;&gt; {
      if (!post) {
        throw new HttpException(&#x27;post does not exist&#x27;, HttpStatus.NO_CONTENT);
      }

      return post;
    });
    const newComment &#x3D; new Comment();
    newComment.author &#x3D; user;
    newComment.text &#x3D; comment.text;
    newComment.post &#x3D; post;
    return this.commentRepository.save(newComment).then((comment) &#x3D;&gt; {
      return this.getPostById(comment.post.id);
    });
  }

  async getPostComments(postId: string, pageOptionsDto: PageOptionsDto): Promise&lt;PageDto&lt;Comment&gt;&gt; {
    const queryResults &#x3D; await this.commentRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Comment.post&#x27;, &#x27;Post&#x27;)
      .select([&#x27;Comment.id&#x27;, &#x27;Comment.text&#x27;, &#x27;Comment.createdAt&#x27;, &#x27;Post.id&#x27;])
      .leftJoinAndSelect(&#x27;Comment.author&#x27;, &#x27;User&#x27;)
      .where(&#x27;Comment.post.id &#x3D; :id&#x27;, { id: postId })
      .skip(pageOptionsDto.skip)
      .take(pageOptionsDto.take)
      .orderBy(&#x27;Comment.createdAt&#x27;, pageOptionsDto.order)
      .getManyAndCount()
      .then((userCommentsAndCount) &#x3D;&gt; {
        return {
          items: userCommentsAndCount[0].map((comment) &#x3D;&gt; {
            delete comment.post;
            return comment;
          }),
          itemsCount: userCommentsAndCount[1]
        };
      });

    const itemCount: number &#x3D; queryResults.itemsCount;
    const entities: Comment[] &#x3D; queryResults.items;

    const pageMetaDto: PageMetaDto &#x3D; new PageMetaDto({ itemCount, pageOptionsDto });

    return new PageDto(entities, pageMetaDto);
  }

  async getUserComments(userId: string, pageOptionsDto: PageOptionsDto): Promise&lt;PageDto&lt;Comment&gt;&gt; {
    const queryResults &#x3D; await this.commentRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Comment.post&#x27;, &#x27;Post&#x27;)
      .select([
        &#x27;Comment.id&#x27;,
        &#x27;Comment.text&#x27;,
        &#x27;Comment.createdAt&#x27;,
        &#x27;Post.id&#x27;,
        &#x27;Post.caption&#x27;,
        &#x27;Post.location&#x27;,
        &#x27;Post.visibility&#x27;,
        &#x27;Post.createdAt&#x27;,
        &#x27;Post.tag&#x27;,
        &#x27;Post.type&#x27;,
        &#x27;Post.imageUrl&#x27;,
        &#x27;Post.imageId&#x27;
      ])
      .leftJoinAndSelect(&#x27;Comment.author&#x27;, &#x27;User&#x27;)
      .skip(pageOptionsDto.skip)
      .take(pageOptionsDto.take)
      .orderBy(&#x27;Comment.createdAt&#x27;, pageOptionsDto.order)
      .getManyAndCount()
      .then((userCommentsAndCount) &#x3D;&gt; {
        return {
          items: userCommentsAndCount[0].map((comment) &#x3D;&gt; {
            delete comment.author;
            return comment;
          }),
          itemsCount: userCommentsAndCount[1]
        };
      });

    const itemCount: number &#x3D; queryResults.itemsCount;
    const entities: Comment[] &#x3D; queryResults.items;

    const pageMetaDto: PageMetaDto &#x3D; new PageMetaDto({ itemCount, pageOptionsDto });

    return new PageDto(entities, pageMetaDto);
  }

  async deleteComment(user: any, commentId: string): Promise&lt;DeleteResult&gt; {
    const comment &#x3D; await this.commentRepository
      .createQueryBuilder()
      .leftJoinAndSelect(&#x27;Comment.author&#x27;, &#x27;User&#x27;)
      .where(&#x27;Comment.author.id &#x3D; :id&#x27;, { id: user.id })
      .where(&#x27;Comment.id &#x3D; :id&#x27;, { id: commentId })
      .getOne();

    if (!comment) {
      throw new HttpException(&#x27;comment does not exist&#x27;, HttpStatus.NO_CONTENT);
    }

    return await this.commentRepository.delete({ id: commentId });
  }

  async likePost(user: any, postId: string): Promise&lt;Like&gt; {
    const post &#x3D; await this.getPostById(postId).then((post) &#x3D;&gt; {
      if (!post) {
        throw new HttpException(&#x27;post does not exist&#x27;, HttpStatus.NO_CONTENT);
      }

      return post;
    });

    if (post.likes.length &#x3D;&#x3D;&#x3D; 0) {
      post.likes &#x3D; [];
    }
    if (post.likes.find((like) &#x3D;&gt; like.likedBy.id &#x3D;&#x3D;&#x3D; user.id)) {
      throw new HttpException(&#x27;post already liked&#x27;, HttpStatus.BAD_REQUEST);
    }

    const like &#x3D; new Like();
    like.likedBy &#x3D; user;
    like.likedPost &#x3D; post;

    return this.likeRepository.save(like);
  }

  async unlikePost(user: any, postId: string): Promise&lt;DeleteResult&gt; {
    const post &#x3D; await this.getPostById(postId).then((post) &#x3D;&gt; {
      if (!post) {
        throw new HttpException(&#x27;post does not exist&#x27;, HttpStatus.NO_CONTENT);
      }

      return post;
    });

    if (post.likes.length &#x3D;&#x3D;&#x3D; 0) {
      post.likes &#x3D; [];
    }
    if (!post.likes.find((like) &#x3D;&gt; like.likedBy.id &#x3D;&#x3D;&#x3D; user.id)) {
      throw new HttpException(&#x27;post not liked&#x27;, HttpStatus.BAD_REQUEST);
    }

    for (let i &#x3D; 0; i &lt; post.likes.length; i++) {
      if (post.likes[i].likedBy.id &#x3D;&#x3D;&#x3D; user.id) {
        await this.postRepository.update(post.id, { likesCount: post.likes.length - 1 });

        return this.likeRepository.delete({ id: post.likes[i].id });
      }
    }
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'PostService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
